<html>

<head>
	<script src="https://unpkg.com/zdog@1/dist/zdog.dist.min.js"></script>
	<title>ZDog</title>
	<link type='text/css' rel='stylesheet' href='index.css' />
</head>

<body>
	<!-- Render target -->
	<canvas class="zdog-canvas" width="600px" height="600px"></canvas>

	<!-- Split this into its own script? -->
	<script>

		let COLORS = {
			FEATHERS: {
				LIGHT: 'grey',
				DARK: 'darkslategrey'
			},
			BEAK: 'goldenrod',
			PUPILS: 'black',
			EYES: 'white',
			SKIN: 'pink',
			DEBUG: 'violet'
		}

		let isSpinning = false;
		isSpinning = true;

		// create illo
		let illo = new Zdog.Illustration({
			// set canvas with selector
			element: '.zdog-canvas',
			dragRotate: true,
			zoom: 0.4,
			dragRotate: true,
			translate: {
				y: -300
			},
			// stop rotation when dragging starts
			onDragStart: function () {
				isSpinning = false;
			},
		});

		// this holds all the bread
		let bread = new Zdog.Group({
			addTo: illo,
			rotate: {
				x: Zdog.TAU / 4
			},
			translate: {
				y: 700
			}
		});

		let crust = new Zdog.RoundedRect({
			addTo: bread,
			width: 120,
			height: 80,
			cornerRadius: 10,
			stroke: 20,
			color: '#EA0',
			fill: true
		});


		let squish = crust.copyGraph({
			color: 'white',
			width: 100,
			height: 60
		})



		let dome = new Zdog.Hemisphere({
			addTo: illo,
			diameter: 120,
			color: COLORS.FEATHERS.DARK,
			rotate: {
				x: Zdog.TAU / 4,
				z: Zdog.TAU / 4
			},
		});


		let face = new Zdog.Cylinder({
			addTo: dome,
			diameter: 120,
			length: 200,
			translate: {
				z: -99
			},
			stroke: false,
			color: COLORS.FEATHERS.DARK,
			// color: COLORS.DEBUG
			// backface: '#E62',
		});

		let eye = new Zdog.Shape({
			addTo: dome,
			stroke: 20,
			color: COLORS.EYES,
			translate: { x: 50, y: -40, z: -10 }
		});

		let pupil = new Zdog.Shape({
			addTo: eye,
			stroke: 10,
			color: 'black',
			translate: { x: 10 }
		});

		eye.copyGraph({
			// overwrite original options
			translate: { x: 50, y: 40, z: -10 },
		});

		let beak = new Zdog.Cone({
			addTo: face,
			diameter: 70,
			length: 90,
			stroke: false,
			color: COLORS.BEAK,
			// backface: '#C25',
			rotate: { y: -Zdog.TAU / 4 },
			translate: { x: 55, z: 50 }
		});

		let body = new Zdog.Shape({
			addTo: illo,
			stroke: 500,
			color: COLORS.FEATHERS.LIGHT,
			translate: {
				y: 350,
				z: -100,
			}
		})

		let legs = new Zdog.Group({
			addTo: body,
			translate: {
				y: 250
			}
		});

		let leg = new Zdog.Shape({
			addTo: legs,
			translate: {
				x: -100,
			},
			path: [
				// { x: -32, y: -40 }, // start at top left
				{ y: -40 }, // line origin
				{ y: 40 }, // bottom of leg
				{ x: -20, y: 40, z: 40 },
				{ y: 40 }, // bottom of leg
				{ y: 40, z: 40 },
				{ y: 40 }, // bottom of leg
				{ x: 20, y: 40, z: 40 }
			],
			closed: false,
			stroke: 20,
			color: COLORS.SKIN
		});

		leg.copyGraph({
			translate: {
				x: 100,
			},
			// color: 'red'
		})

		function animate() {
			// rotate
			if (isSpinning) {
				illo.rotate.y += 0.03;
			}
			illo.updateRenderGraph();
			requestAnimationFrame(animate);
		}
		animate();


	</script>
</body>

</html>